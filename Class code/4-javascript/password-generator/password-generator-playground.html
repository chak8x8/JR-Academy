<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Password Generator Playground</title>
<style>
  :root { --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#9ca3af; --line:#1f2937; --ok:#34d399; --err:#f87171; }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  header{padding:20px 16px}
  main{display:grid;gap:14px;padding:0 16px 20px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
  h2{margin:0 0 8px;font-size:18px}
  p{margin:.4rem 0;color:var(--muted)}
  button{background:#1f2a44;color:#e5e7eb;border:1px solid #334155;border-radius:8px;padding:8px 10px;cursor:pointer}
  button:hover{background:#243453}
  code{background:#0b1220;padding:2px 4px;border-radius:4px}
  pre{background:#0b1220;color:#cbd5e1;border-radius:8px;padding:10px;overflow:auto}
  .log{background:#0b1220;border:1px dashed #334155;border-radius:8px;padding:10px;white-space:pre-wrap;min-height:40px}
  .ok{color:var(--ok)} .err{color:var(--err)}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
</style>
</head>
<body>
<header>
  <h1>Password Generator — Concept Playground</h1>
  <p>Click each demo. Watch the output boxes to understand <code>filter</code>, <code>forEach</code>, arrow functions, and symbol picking.</p>
</header>

<main>
  <section class="card" id="demo1">
    <h2>1) Arrow functions: <code>() =&gt; { ... }</code> vs <code>() =&gt; ( ... )</code></h2>
    <p><b>Rule:</b> Use <code>{ ... }</code> for statements; use <code>( ... )</code> only for a single expression.</p>
    <pre><code>// OK: many statements
const f1 = () =&gt; {
  const a = 1;
  const b = 2;
  return a + b;
};

// OK: one expression
const f2 = () =&gt; (1 + 2);</code></pre>
    <div class="row"><button data-run="1">Run demo</button></div>
    <div class="log"></div>
  </section>

  <section class="card" id="demo2">
    <h2>2) The type array: <code>[{lower},{upper},{number},{symbol}]</code> + <code>filter</code></h2>
    <p><b>Idea:</b> Keep only the selected types. <code>Object.values(item)[0]</code> pulls the boolean.</p>
    <div class="row">
      <label><input type="checkbox" id="d2lower" checked> lower</label>
      <label><input type="checkbox" id="d2upper" checked> upper</label>
      <label><input type="checkbox" id="d2number" checked> number</label>
      <label><input type="checkbox" id="d2symbol" checked> symbol</label>
      <button data-run="2">Build &amp; filter</button>
    </div>
    <div class="log"></div>
  </section>

  <section class="card" id="demo3">
    <h2>3) Using <code>forEach</code> to call the right generator</h2>
    <p><b>Idea:</b> <code>Object.keys(type)[0]</code> gives the key (e.g. "lower"), then call <code>randomFunc[key]()</code>.</p>
    <div class="row"><button data-run="3">Run round-robin one cycle</button></div>
    <div class="log"></div>
  </section>

  <section class="card" id="demo4">
    <h2>4) Symbols: pick a random char from a string</h2>
    <p>The index is <code>Math.floor(Math.random()*symbols.length)</code>. Then <code>symbols[index]</code>.</p>
    <div class="row"><button data-run="4">Get 10 random symbols</button></div>
    <div class="log"></div>
  </section>

  <section class="card" id="demo5">
    <h2>5) Full generator preview</h2>
    <div class="row">
      <label>Length <input type="number" id="len" min="4" max="32" value="16" style="width:80px"></label>
      <label><input type="checkbox" id="gLower" checked> lower</label>
      <label><input type="checkbox" id="gUpper" checked> upper</label>
      <label><input type="checkbox" id="gNumber" checked> number</label>
      <label><input type="checkbox" id="gSymbol" checked> symbol</label>
      <button data-run="5">Generate</button>
    </div>
    <div class="log"></div>
  </section>
</main>

<script>
  // SAME helpers as fixed version
  function getRandomLower(){ return String.fromCharCode(Math.floor(Math.random()*26)+97); }
  function getRandomUpper(){ return String.fromCharCode(Math.floor(Math.random()*26)+65); }
  function getRandomNumber(){ return String.fromCharCode(Math.floor(Math.random()*10)+48); }
  function getRandomSymbol(){ const s="!@#$%^&*()_+<>/,.=-[]{}|~?"; return s[Math.floor(Math.random()*s.length)]; }
  const randomFunc={ lower:getRandomLower, upper:getRandomUpper, number:getRandomNumber, symbol:getRandomSymbol };

  function generatePassword(lower,upper,number,symbol,length){
    let out='';
    const typesArr=[{lower},{upper},{number},{symbol}].filter(i=>Object.values(i)[0]);
    const typesCount=typesArr.length;
    if(!typesCount) return '';
    for(let i=0;i<length;i+=typesCount){
      typesArr.forEach(t=>{
        const k=Object.keys(t)[0];
        out+=randomFunc[k]();
      });
    }
    return out.slice(0,length);
  }

  function log(card, ...lines){
    const box=card.querySelector('.log');
    box.textContent = lines.join('\n');
  }

  const demos={
    1(card){
      // show what runs in each arrow style
      const f1=()=>{ const a=1; const b=2; return a+b; };
      const f2=()=> (1+2);
      log(card, 'f1() => '+f1(), 'f2() => '+f2(), 'Note: {} is for statements. () is ONLY for a single expression.');
    },
    2(card){
      const lower = document.getElementById('d2lower').checked;
      const upper = document.getElementById('d2upper').checked;
      const number= document.getElementById('d2number').checked;
      const symbol= document.getElementById('d2symbol').checked;

      const raw = [{lower},{upper},{number},{symbol}];
      const filtered = raw.filter(o=>Object.values(o)[0]);

      log(card,
        'raw:      '+JSON.stringify(raw),
        'filtered: '+JSON.stringify(filtered),
        'Object.values({lower:true})[0] -> true'
      );
    },
    3(card){
      const selected=[{lower:true},{upper:true},{number:true},{symbol:false}]; // pretend these were chosen
      let result='';
      selected.filter(o=>Object.values(o)[0]).forEach(type=>{
        const key=Object.keys(type)[0]; // "lower","upper","number"
        result+=randomFunc[key]();
      });
      log(card, 'Selected types: '+JSON.stringify(selected),
                'Round-robin call → '+result);
    },
    4(card){
      let s='';
      for(let i=0;i<10;i++) s+=getRandomSymbol();
      log(card, '10 picks: '+s, 'Picked one random index from the symbols string each time.');
    },
    5(card){
      const length = Number(document.getElementById('len').value);
      const lower  = document.getElementById('gLower').checked;
      const upper  = document.getElementById('gUpper').checked;
      const number = document.getElementById('gNumber').checked;
      const symbol = document.getElementById('gSymbol').checked;
      const pwd = generatePassword(lower,upper,number,symbol,length);
      log(card, 'Password: '+pwd);
    }
  };

  document.querySelectorAll('[data-run]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id=btn.getAttribute('data-run');
      const card=btn.closest('.card');
      demos[id](card);
    });
  });
</script>
</body>
</html>
