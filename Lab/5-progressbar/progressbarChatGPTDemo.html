<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Step Progress Bar — Fully Annotated Playground</title>
  <style>
    /* ===== Theme variables (easy to tweak) ===== */
    :root{
      --line:#3498db; --line-empty:#e0e0e0; --bg:#f6f6fb; --ink:#111;
      --speed:.35s; --circle:34px; --track-height:4px;
      --shadow-inset: 0 0 0 2px #fff inset;
    }
    *{ box-sizing:border-box }
    body{
      margin:0; min-height:100vh; background:var(--bg);
      display:grid; place-items:center;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .wrap{ width:min(1100px, 92vw); }
    h1{ margin:16px 0 8px; font-size:clamp(22px, 2.4vw, 34px) }
    p.note{ color:#555; margin:6px 0 16px; max-width:760px }

    .grid{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); align-items:start }
    .card{ background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:14px }
    .card.dark{ background:linear-gradient(180deg,#0b1220,#0e1727); color:#e5e7eb; border-color:#1f2937 }

    /* ===== Progress bar layout ===== */
    .progress-container{
      position:relative; display:flex; align-items:center; justify-content:space-between;
      height:var(--circle); width:420px; max-width:92vw; margin:10px auto 14px;
    }
    .progress-container::before{
      content:""; position:absolute; left:0; top:50%; transform:translateY(-50%);
      height:var(--track-height); width:100%; background:var(--line-empty); border-radius:2px; z-index:0;
    }
    .progress{
      position:absolute; left:0; top:50%; transform:translateY(-50%);
      height:var(--track-height); width:0%; background:var(--line);
      border-radius:2px; transition:width var(--speed) ease; z-index:0;
    }
    .circle{
      width:var(--circle); height:var(--circle); border-radius:50%;
      background:#fff; color:var(--ink); border:3px solid var(--line-empty);
      display:flex; align-items:center; justify-content:center;
      transition:border-color var(--speed) ease, color var(--speed) ease, transform var(--speed) ease;
      z-index:1; box-shadow:var(--shadow-inset); font-weight:600; user-select:none;
    }
    .circle.active{ border-color:var(--line); transform:scale(1.06); }

    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    .btn{ background:var(--line); color:#fff; border:0; border-radius:8px; padding:8px 14px; cursor:pointer; transition:transform var(--speed) ease }
    .btn:active{ transform:scale(0.95) }
    .btn:disabled{ background:#b8c6d1; cursor:not-allowed }

    .mini{ font-size:12px; color:#64748b }
    .kbd{ font:600 11px/1 ui-monospace, SFMono-Regular, Menlo, monospace; padding:2px 6px; border:1px solid #cbd5e1; border-radius:6px; background:#f8fafc; color:#111 }
    pre{ margin:0; overflow:auto; border-radius:8px }
    .code{ background:#0b1220; border:1px solid #1f2937; color:#e5e7eb; padding:10px; font: 12px/1.5 ui-monospace, Menlo, Consolas, monospace; white-space:pre }
    .hl{ background:rgba(34,211,238,.12) }
    .wire{ outline:2px dashed #22d3ee; outline-offset:2px }

    .two-col{ display:grid; grid-template-columns: 1fr 1fr; gap:12px }
    @media (max-width: 900px){ .two-col{ grid-template-columns: 1fr } }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Step Progress Bar — Fully Annotated Playground</h1>
    <p class="note">Click the UI, run the buttons, and see how HTML, CSS, and JS connect. Use the wiring buttons to highlight the exact lines.</p>

    <div class="grid">
      <!-- ========= LEFT: LIVE DEMO ========= -->
      <div class="card">
        <h2 style="margin:0 0 8px">Live Component</h2>

        <!-- Parent acts like a Row because of display:flex -->
        <div class="progress-container" id="pc">
          <!-- Blue fill line (behind circles, width set by JS) -->
          <div class="progress" id="progress"></div>

          <!-- Four independent circles we can style & toggle -->
          <div class="circle active" id="c1">1</div>
          <div class="circle" id="c2">2</div>
          <div class="circle" id="c3">3</div>
          <div class="circle" id="c4">4</div>
        </div>

        <div class="row" style="margin-bottom:8px">
          <button class="btn" id="prev">Prev</button>
          <button class="btn" id="next">Next</button>
          <button class="btn" id="reset" style="background:#444">Reset</button>
          <span class="mini" id="label">Step <span id="stepNow">1</span> / <span id="stepTotal">4</span> — width: <span id="pct">0</span>%</span>
        </div>

        <details>
          <summary><strong>Customize color & speed</strong></summary>
          <div class="row" style="margin-top:8px">
            <label>Line color <input type="color" id="lineColor" value="#3498db"></label>
            <label>Speed (ms) <input type="number" id="speed" value="350" min="50" max="3000" step="50" style="width:90px"></label>
            <button class="btn" id="apply">Apply</button>
          </div>
          <p class="mini">This updates CSS variables <code>--line</code> and <code>--speed</code> on <code>:root</code>.</p>
        </details>

        <div class="row" style="margin-top:10px">
          <button class="btn" id="wire-html">Wire: HTML</button>
          <button class="btn" id="wire-css">Wire: CSS</button>
          <button class="btn" id="wire-js">Wire: JS</button>
          <button class="btn" id="jump-css" style="background:#6b7280">Show CSS</button>
        </div>

        <p class="mini">Keyboard: <span class="kbd">←</span> Prev, <span class="kbd">→</span> Next</p>
      </div>

      <!-- ========= RIGHT: CODE + EXPLANATIONS ========= -->
      <div class="card dark">
        <h2 style="margin:0 0 8px">Code & Explanations</h2>

        <div class="two-col">
          <!-- HTML pane -->
          <div>
            <p class="mini"><strong>HTML</strong> — Structure (elements, ids, and classes)</p>
            <pre class="code" id="code-html"><code>
01 &lt;div class="progress-container" id="pc"&gt;  <!-- parent row (flex) -->
02   &lt;div class="progress" id="progress"&gt;&lt;/div&gt;  <!-- blue fill line -->
03   &lt;div class="circle active" id="c1"&gt;1&lt;/div&gt;  <!-- step 1 (active) -->
04   &lt;div class="circle" id="c2"&gt;2&lt;/div&gt;        <!-- step 2 -->
05   &lt;div class="circle" id="c3"&gt;3&lt;/div&gt;        <!-- step 3 -->
06   &lt;div class="circle" id="c4"&gt;4&lt;/div&gt;        <!-- step 4 -->
07 &lt;/div&gt;
</code></pre>
          </div>

          <!-- CSS pane (the missing one) -->
          <div>
            <p class="mini"><strong>CSS (key parts)</strong> — Layout, z-index, transforms, transitions</p>
            <pre class="code" id="code-css"><code>
01 .progress-container{                       /* parent row (flex layout) */
02   display:flex;                            /* children side-by-side (like Flutter Row) */
03   align-items:center;                      /* vertically center the circles */
04   justify-content:space-between;           /* spread circles across the width */
05   height:var(--circle);                    /* ensures 50% vertical = circle center */
06   position:relative;                       /* anchor for absolutely positioned track/fill */
07 }
08 .progress-container::before{               /* gray track (full length) */
09   content:"";                              /* create a pseudo-element box */
10   position:absolute; left:0; top:50%;      /* position relative to the container */
11   transform:translateY(-50%);              /* align track to exact vertical middle */
12   height:var(--track-height); width:100%;  /* thickness & full width */
13   background:var(--line-empty);            /* gray */
14   z-index:0;                               /* behind circles */
15 }
16 .progress{                                 /* blue fill line */
17   position:absolute; left:0; top:50%;
18   transform:translateY(-50%);              /* same vertical centering as track */
19   height:var(--track-height);              /* same thickness as track */
20   width:0%;                                /* JS animates to 100% */
21   background:var(--line);                  /* blue */
22   transition:width var(--speed) ease;      /* animate width changes smoothly */
23   z-index:0;                               /* behind circles */
24 }
25 .circle{                                   /* each step dot */
26   z-index:1;                               /* above the lines */
27   width:var(--circle); height:var(--circle);
28   border-radius:50%;                       /* make a circle */
29   border:3px solid var(--line-empty);      /* inactive border color */
30   display:flex; align-items:center; justify-content:center; /* center number */
31   box-shadow:var(--shadow-inset);          /* white ring hides line under circle */
32   transition: border-color var(--speed) ease, transform var(--speed) ease; /* animate */
33 }
34 .circle.active{                            /* extra state class added by JS */
35   border-color:var(--line);                /* turn border blue */
36   transform:scale(1.06);                   /* tiny pulse/grow */
37 }
38 .btn:active{                               /* CSS pseudo-class: while pressed */
39   transform:scale(0.95);                   /* click feedback */
40 }
</code></pre>
            <details class="mini" style="margin-top:8px">
              <summary><strong>CSS concept explainer</strong> (quick glossary)</summary>
              <ul>
                <li><code>display:flex</code> — row/column layout; here it lays circles in a row.</li>
                <li><code>align-items:center</code> — vertically centers flex children.</li>
                <li><code>justify-content:space-between</code> — spreads children across the width.</li>
                <li><code>position:relative</code> — lets absolute children use this as positioning context.</li>
                <li><code>::before</code> — pseudo-element for the gray track (no extra HTML).</li>
                <li><code>top:50% + translateY(-50%)</code> — precise vertical centering.</li>
                <li><code>z-index</code> — stacking order; circles above lines.</li>
                <li><code>border-radius:50%</code> — makes a square into a circle.</li>
                <li><code>box-shadow: … inset</code> — white inner ring to hide line under circle.</li>
                <li><code>transition</code> — animates property changes smoothly.</li>
                <li><code>:active</code> — pressed state; used for click feedback.</li>
                <li><code>var(--name)</code> — CSS variables from <code>:root</code>, changeable via JS.</li>
              </ul>
            </details>
          </div>

          <!-- JavaScript pane -->
          <div>
            <p class="mini"><strong>JavaScript</strong> — State, classList, events, formula</p>
            <pre class="code" id="code-js"><code>
01 const progress = document.getElementById('progress');     // HTML #progress → JS
02 const circles  = document.querySelectorAll('.circle');     // NodeList of 4 circles
03 const prev     = document.getElementById('prev');          // #prev button
04 const next     = document.getElementById('next');          // #next button
05 const resetBtn = document.getElementById('reset');         // #reset button
06 let currentActive = 1;                                     // state: 1..circles.length
07 function updateStyle(){                                    // re-render from state
08   circles.forEach((circle, i) => {
09     if (i < currentActive) circle.classList.add('active');  // turn on .active
10     else circle.classList.remove('active');                 // turn off .active
11   });
12   const covered = currentActive - 1;                        // gaps covered
13   const total   = circles.length - 1;                       // total gaps
14   const pct     = (covered / total) * 100;                  // width percentage
15   progress.style.width = pct + '%';                         // apply to blue line
16   prev.disabled = currentActive === 1;
17   next.disabled = currentActive === circles.length;
18   document.getElementById('stepNow').textContent = String(currentActive);
19   document.getElementById('stepTotal').textContent = String(circles.length);
20   document.getElementById('pct').textContent = Math.round(pct);
21 }
22 next.addEventListener('click', () => {                      // Next
23   currentActive = Math.min(circles.length, currentActive + 1);
24   updateStyle();
25 });
26 prev.addEventListener('click', () => {                      // Prev
27   currentActive = Math.max(1, currentActive - 1);
28   updateStyle();
29 });
30 resetBtn.addEventListener('click', () => { currentActive = 1; updateStyle(); });
31 window.addEventListener('keydown', (e) => {                 // Keyboard
32   if(e.key==='ArrowRight') next.click();
33   if(e.key==='ArrowLeft')  prev.click();
34 });
35 document.getElementById('apply').addEventListener('click', () => { // Theme
36   const color = document.getElementById('lineColor').value;
37   const ms = Math.max(50, Math.min(3000, Number(document.getElementById('speed').value) || 350));
38   document.documentElement.style.setProperty('--line', color);
39   document.documentElement.style.setProperty('--speed', ms + 'ms');
40   document.querySelectorAll('.circle').forEach(c => c.style.transitionDuration = ms + 'ms');
41   document.getElementById('progress').style.transitionDuration = ms + 'ms';
42 });
</code></pre>
          </div>

          <!-- Concept map -->
          <div>
            <p class="mini"><strong>Concept Map</strong> — How things connect</p>
            <ul class="mini" style="line-height:1.7">
              <li><b>HTML id</b> (<code>#progress</code>) → <b>JS</b> (<code>getElementById</code>) → update style width.</li>
              <li><b>HTML class</b> (<code>.circle</code>) → <b>JS NodeList</b> → <code>classList.add/remove('active')</code> → <b>CSS</b> rule <code>.circle.active</code>.</li>
              <li><b>Buttons</b> → <b>JS events</b> → update <b>state</b> → call <code>updateStyle()</code>.</li>
              <li><b>Layout</b>: flex row; track/fill absolute centered; circles above via z-index & inset box-shadow.</li>
              <li><b>Animation</b>: CSS <code>transition</code> for width/transform; CSS <code>:active</code> for click feedback.</li>
            </ul>
          </div>
        </div>
      </div>
      <!-- ===== End right panel ===== -->
    </div>
  </div>

  <script>
    // ===== DOM hooks =====
    const progress = document.getElementById('progress');
    const circles  = document.querySelectorAll('.circle');
    const prev     = document.getElementById('prev');
    const next     = document.getElementById('next');
    const resetBtn = document.getElementById('reset');
    const stepNow  = document.getElementById('stepNow');
    const stepTotal= document.getElementById('stepTotal');
    const pctOut   = document.getElementById('pct');

    // ===== State =====
    let currentActive = 1;
    stepTotal.textContent = String(circles.length);

    // ===== Render from state =====
    function updateStyle(){
      // Toggle active circles
      circles.forEach((circle, i) => {
        if (i < currentActive) circle.classList.add('active');
        else circle.classList.remove('active');
      });
      // Compute width% = (covered gaps / total gaps) * 100
      const covered = currentActive - 1;
      const total   = circles.length - 1;
      const pct     = (covered / total) * 100;
      progress.style.width = pct + '%';

      // Buttons + readouts
      prev.disabled = currentActive === 1;
      next.disabled = currentActive === circles.length;
      stepNow.textContent = String(currentActive);
      pctOut.textContent  = String(Math.round(pct));
    }

    // ===== Events =====
    next.addEventListener('click', () => {
      currentActive = Math.min(circles.length, currentActive + 1);
      updateStyle();
    });
    prev.addEventListener('click', () => {
      currentActive = Math.max(1, currentActive - 1);
      updateStyle();
    });
    resetBtn.addEventListener('click', () => { currentActive = 1; updateStyle(); });

    // Keyboard shortcuts
    window.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight') next.click();
      if(e.key === 'ArrowLeft')  prev.click();
    });

    // Theme controls
    document.getElementById('apply').addEventListener('click', () => {
      const color = document.getElementById('lineColor').value;
      const ms = Math.max(50, Math.min(3000, Number(document.getElementById('speed').value) || 350));
      document.documentElement.style.setProperty('--line', color);
      document.documentElement.style.setProperty('--speed', ms + 'ms');
      circles.forEach(c => c.style.transitionDuration = ms + 'ms');
      progress.style.transitionDuration = ms + 'ms';
    });

    // Initial render
    updateStyle();

    // ===== Wiring helpers (highlight connections) =====
    const htmlPane = document.getElementById('code-html');
    const cssPane  = document.getElementById('code-css');
    const jsPane   = document.getElementById('code-js');

    function clearHighlights(){
      document.querySelectorAll('.hl').forEach(n => n.classList.remove('hl'));
      document.querySelectorAll('.wire').forEach(n => n.classList.remove('wire'));
    }
    function highlightLines(pane, lines){
      // Rebuild the pane's innerHTML with selected line numbers wrapped
      const src = pane.textContent.split('\n');
      const rebuilt = src.map((ln, i) => lines.includes(i+1) ? `<span class="hl">${ln}</span>` : ln).join('\n');
      pane.innerHTML = rebuilt;
    }

    document.getElementById('wire-html').addEventListener('click', () => {
      clearHighlights();
      document.getElementById('pc').classList.add('wire');
      highlightLines(htmlPane, [1,2,3,4,5,6,7]);
    });
    document.getElementById('wire-css').addEventListener('click', () => {
      clearHighlights();
      highlightLines(cssPane, [1,2,3,4,5,6,8,9,10,11,12,13,14,16,17,18,19,20,21,22,23,25,26,27,28,29,30,31,32,34,35,36,38,39,40]);
      document.getElementById('pc').classList.add('wire');
      progress.classList.add('wire');
      document.querySelectorAll('.circle').forEach(c => c.classList.add('wire'));
    });
    document.getElementById('wire-js').addEventListener('click', () => {
      clearHighlights();
      highlightLines(jsPane, [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]);
      document.getElementById('pc').classList.add('wire');
      progress.classList.add('wire');
    });

    // Jump button to ensure you can find the CSS pane on narrow screens
    document.getElementById('jump-css').addEventListener('click', () => {
      const cssBlock = document.getElementById('code-css');
      if (cssBlock) cssBlock.scrollIntoView({ behavior: 'smooth', block: 'center' });
    });
  </script>
</body>
</html>
